<!doctype html>
<html>
<head>
    <title>LV3</title>
    <meta charset="utf-8" />

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>



</head>
<body>
<script>

var data2 = [{"x":100,"y":100,"width":100,"height":200},
{"x":400,"y":100,"width":100,"height":200},
{"x":700,"y":300,"width":100,"height":200}];

var colors = d3.scale.category10();

var width = 1024;
var height = 768;
var svg = d3.select("body")
    .append("svg")
    .attr("width",width)
    .attr("height",height)
    .style("background","black");
var groups = svg.selectAll("g")
    .data(data2)
    .enter()
    .append("g")
    .attr("transform", function(d){return "translate(" + d.x + "," + d.y + ")";});

var texts = groups
    .append("text")
         .attr("x", function(d){return 0;})
            .attr("y", function(d){return 0;})
           .html((function (d) {return d.x + ", " + d.y;}))
       .style("fill",function (d,i) {return colors(i);})
        .style("opacity",1)
.on("mouseover",animate);
          //  .on("mouseleave",animate2);

var rects = groups// svg.selectAll("rect")
    
    .append("rect")
            .attr("x", function(d){return 0;})
            .attr("y", function(d){return 0;})
            .attr("width", function(d){return d.width;})
            .attr("height", function(d){return d.height;})
            .attr("class", function(d){return d.x;})
            .style("fill", function (d,i) {return colors(i);})
            .style("opacity",0.8)
            .on("mouseover",animate)
            //.on("mouseleave",animate2)
;


function animate(){
/*    d3.select(this).transition()
        .duration(500)
         .style("fill", function () {return colors(4);});
  */  
d3.select(this).transition()
    .duration(500)
.attr("transform", function(d){return "rotate(60)";});// " + d.x + "," + d.y + ")";});
    
d3.select(this).transition()
    .delay(400)
    .duration(500)
.attr("transform", function(d){return "rotate(0)";});// " + d.x + "," + d.y + ")";});

d3.select(this).transition()
    .delay(800)
    .duration(500)
.attr("transform", function(d){return "rotate(60)";});// " + d.x + "," + d.y + ")";});

d3.select(this).transition()
    .delay(1200)
    .duration(500)
.attr("transform", function(d){return "rotate(0)";});// " + d.x + "," + d.y + ")";});

d3.select(this).transition()
    .delay(1600)
    .duration(500)
.attr("transform", function(d){return "rotate(60)";});// " + d.x + "," + d.y + ")";});


d3.select(this).transition()
    .delay(2000)
    .duration(1000)
.attr("transform", function(d){return "rotate(30)";});// " + d.x + "," + d.y + ")";});

}

function animate2(){
/*    d3.select(this).transition()
        .duration(500)
         .style("fill", function () {return colors(4);});
  */  
d3.select(this).transition()
    .duration(500)
.attr("transform", function(d){return "rotate(0 " + d.x + "," + d.y + ")";})
}


</script>
</body>
</html>