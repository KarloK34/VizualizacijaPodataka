<!doctype html>
<html>
<head>
    <title>LV3</title>
    <meta charset="utf-8" />

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>



</head>
<body>
<script>
var data = [{"x":100,"y":100,"width":50,"height":50,"g":1},           {"x":300,"y":100,"width":50,"height":50,"g":1},           {"x":500,"y":100,"width":50,"height":50,"g":1},           {"x":100,"y":300,"width":50,"height":50,"g":2},           {"x":300,"y":300,"width":50,"height":50,"g":2}];
var dataG = [1,2];
var colors = d3.scale.category10();
var colors2 = d3.scale.category20();
var svg = d3.select("body")
    .append("svg")
    .attr("width", 720)
    .attr("height", 500)
    .style("background", "aliceblue");


var rects = svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
 .attr("x", function(d){return d.x;})
            .attr("y", function(d){return d.y;})
            .attr("width", function(d){return d.width;})
            .attr("height", function(d){return d.height;})
            .attr("class", function(d,i){return "class" + i;})
            .style("fill", function (d,i) {return colors(i);})
.on("mouseover",animate);

function animate(){
var w = d3.select(this).attr("width");
//alert(w)
d3.select(this)
  .transition()
    .duration(500)
    .attr("width", function(d){return 1;})
  .transition()
    .delay(500)
    .attr("width", function(d){return d.width;})
    .attr("x", function(d){return d.x-d.width;})
  .transition()
    .delay(1500)
    .attr("width", function(d){return d.width;})
    .attr("x", function(d){return d.x;})
.transition()
    .delay(2000)
    .attr("transform", function(d){return "skewX("+ 20 + ")";})
.transition()
    .delay(2500)
    .attr("transform", function(d){return "skewX("+ -20 + ")";})    
.transition()
    .delay(3000)
    .attr("transform", function(d){return "skewX("+ 0 + ")";})

;
}
</script>
</body>
</html>